# AI翻訳秘書システム - 第三者レビュー依頼書

あなたはセキュリティエンジニア、フロントエンドエンジニア、バックエンドエンジニアの視点で、このシステムを監査してください。

---

## プロジェクト概要

- **目的**: 歯科医院等の小規模事業者向け、従業員コミュニケーション支援SaaS
- **技術スタック**: Next.js 16 + Supabase + OpenAI + LINE Messaging API
- **ソースコード**: `/Users/MBP/.gemini/antigravity/playground/static-solstice/`

---

## レビュー項目

### 1. セキュリティ監査 🔴 最優先

#### 1.1 認証・認可
- [ ] RLS（Row Level Security）ポリシーの網羅性確認
- [ ] テナント間データ漏洩の可能性チェック
- [ ] LINE Webhook署名検証の堅牢性
- [ ] API認証の欠如箇所の特定

#### 1.2 データ保護
- [ ] 機密データ（給与、原文メッセージ）の暗号化状況
- [ ] OpenAI APIへのデータ送信内容確認（PII漏洩リスク）
- [ ] 環境変数の取り扱い適切性
- [ ] SQLインジェクション脆弱性

#### 1.3 入力検証
- [ ] Zod スキーマの網羅性
- [ ] XSS脆弱性（ユーザー入力の表示箇所）
- [ ] ファイルアップロード（将来機能）の検証

---

### 2. バグ・エラー検出 🟡

#### 2.1 ランタイムエラー
- [ ] 未処理のPromise rejection
- [ ] null/undefined アクセス
- [ ] 型アサーション（as）の危険な使用箇所

#### 2.2 ロジックバグ
- [ ] 翻訳フローの状態管理
- [ ] 既読/未読の整合性
- [ ] シフト希望の重複処理

#### 2.3 エッジケース
- [ ] 空文字列の処理
- [ ] 大量データ時のパフォーマンス
- [ ] LINE APIエラー時のフォールバック

---

### 3. UX/UI 操作性 🟢

#### 3.1 経営者ダッシュボード (`/dashboard`)
- [ ] 情報の視認性・優先度
- [ ] 操作フローの直感性
- [ ] レスポンシブ対応
- [ ] ローディング状態の表示

#### 3.2 従業員ポータル (`/employee`)
- [ ] モバイル最適化（LINE経由アクセス想定）
- [ ] タップ領域の適切さ
- [ ] エラーメッセージの明確さ
- [ ] 未完了タスクの視認性

#### 3.3 アクセシビリティ
- [ ] キーボード操作対応
- [ ] aria-label の適切性
- [ ] コントラスト比
- [ ] 日本語フォント・行間

---

### 4. コード品質

#### 4.1 保守性
- [ ] 命名規則の一貫性
- [ ] 関数の単一責任原則
- [ ] 重複コードの有無
- [ ] コメントの適切さ

#### 4.2 テスタビリティ
- [ ] モック可能な依存関係
- [ ] 副作用の分離
- [ ] テストファイルの欠如

---

## 確認すべき重要ファイル

| ファイル | 確認ポイント |
|---------|------------|
| `src/lib/supabase/admin.ts` | 認証、型安全性 |
| `src/app/api/line/webhook/route.ts` | 署名検証、エラー処理 |
| `src/services/*.ts` | DB操作の安全性 |
| `src/core/translation-engine.ts` | プロンプト注入リスク |
| `src/core/rag-engine.ts` | 参照精度、ハルシネーション |
| `supabase/migrations/*.sql` | RLSポリシー |
| `src/components/dashboard/*.tsx` | XSS、状態管理 |
| `src/app/employee/page.tsx` | モバイルUX |

---

## 出力形式

以下の形式で報告してください：

```markdown
## 発見事項

### 🔴 Critical（即時対応必要）
1. [ファイル名:行番号] 問題の説明
   - 影響範囲
   - 推奨修正

### 🟡 Warning（対応推奨）
...

### 🟢 Info（改善提案）
...

## 総合評価
- セキュリティ: ?/10
- 安定性: ?/10
- UX/UI: ?/10
- コード品質: ?/10
```

---

## 実行コマンド

```bash
cd /Users/MBP/.gemini/antigravity/playground/static-solstice

# ビルド確認
npm run build

# 開発サーバー起動（UI確認用）
npm run dev
```

---

以上の項目を順番に確認し、発見した問題と改善提案を報告してください。
